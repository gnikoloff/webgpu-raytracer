<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Primary Meta Tags -->
  <title>WebGPU Raytracer</title>
  <meta name="title" content="WebGPU Raytracer" />
  <meta name="description" content="Realtime pathtracing via WebGPU compute shader" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://gnikoloff.github.io/webgpu-raytracer/" />
  <meta property="og:title" content="WebGPU Raytracer" />
  <meta property="og:description" content="Realtime pathtracing via WebGPU compute shader" />
  <meta property="og:image" content="https://gnikoloff.github.io/webgpu-raytracer/social.png" />

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image" />
  <meta property="twitter:url" content="https://gnikoloff.github.io/webgpu-raytracer/" />
  <meta property="twitter:title" content="WebGPU Raytracer" />
  <meta property="twitter:description" content="Realtime pathtracing via WebGPU compute shader" />
  <meta property="twitter:image" content="https://gnikoloff.github.io/webgpu-raytracer/social.png" />

  <!-- Meta Tags Generated with https://metatags.io -->
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-size: 14px;
      overflow: hidden;
      background: black;
      margin: 0;
      padding: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    }

    body.loaded #header {
      display: block;
    }

    body.loaded #lds-dual-ring {
      display: none;
    }

    a {
      color: white;
    }

    p {
      margin-bottom: 0;
    }

    svg {
      display: block;
      width: 20px;
      height: 20px;
    }

    #toggle-header {
      background: none;
      border: none;
      width: 44px;
      height: 44px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
    }

    #hide-icon {
      display: block;
    }

    #show-icon {
      display: none;
    }

    #toggle-header.active #hide-icon {
      display: none;
    }

    #toggle-header.active #show-icon {
      display: block;
    }

    #c {
      position: fixed;
      top: 50%;
      left: 50%;
      z-index: -1;
    }

    .dg.a {
      max-width: 100% !important;
      margin-right: 0 !important;
      /* display: none !important; */
    }

    #lds-dual-ring {
      position: fixed;
      top: 50%;
      left: 50%;
      display: block;
      width: 14px;
      height: 14px;
      margin: -7px 0 0 0 -7px;
      border-radius: 50%;
      border: 2px solid #fff;
      border-color: #fff transparent #fff transparent;
      animation: lds-dual-ring 1.2s linear infinite;
    }

    @keyframes lds-dual-ring {
      0% {
        transform: rotate(0deg);
      }

      100% {
        transform: rotate(360deg);
      }
    }

    .monospace-value {
      font-family: monospace;
    }

    #header-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    #header-body {
      display: none;
    }

    #header-body.active {
      display: block;
    }

    #header {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      display: none;
      padding: 1rem;
      max-width: 500px;
    }

    @media screen and (min-width: 820px) {
      #header {
        top: 0;
        width: unset;
        bottom: unset;
        max-width: unset;
      }
    }

    #header h1 {
      margin: 0;
      font-size: 18px;
    }

    #header h5 {
      margin: 0.5rem 0 0 0;
      font-weight: 400;
      font-size: 14px;
    }

    #loader {
      margin: 1rem 0 1.5rem 0;
      background: rgba(255, 255, 255, 0.2);
      width: 100%;
      height: 2px;
      position: relative;
    }

    #progress {
      position: absolute;
      top: 0;
      left: 0;
      width: 0;
      height: 100%;
      background: white;
    }

    #progress-percent {
      position: absolute;
      bottom: -13px;
      right: 0;
      font-size: 9px;
    }

    #progress-percent.docked-left {
      left: 0;
    }

    #progress-percent.docked-right {
      right: 0;
    }

    #no-webgpu {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 999999999;
      background: black;
      color: white;
      padding: 1rem;
      box-sizing: border-box;
      display: none;
    }

    #no-webgpu-screenshot img {
      max-width: 700px;
      width: 100%;
    }
  </style>
</head>

<body>

  <div id="no-webgpu">
    <h1>Uh-oh, WebGPU not supported!</h1>
    <p>This raytracer is written with the new WebGPU API. Seems like your browser does not support it.</p>
    <p>Please upgrade to a modern browser.</p>
    <p>For Safari you can check out details how to do so <a
        href="https://webkit.org/blog/14879/webgpu-now-available-for-testing-in-safari-technology-preview/">here</a>.
    </p>
    <p>For Firefox you can check details <a href="https://stackoverflow.com/a/74967300/1777688">here</a>.</p>
    <p id="no-webgpu-screenshot"></p>
  </div>

  <div id="lds-dual-ring"></div>

  <header id="header">
    <div id="header-header">
      <h1>WebGPU Raytracer</h1>
      <button id="toggle-header" role="button">
        <svg id="hide-icon" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill="white"
            d="M12.81 4.36l-1.77 1.78a4 4 0 0 0-4.9 4.9l-2.76 2.75C2.06 12.79.96 11.49.2 10a11 11 0 0 1 12.6-5.64zm3.8 1.85c1.33 1 2.43 2.3 3.2 3.79a11 11 0 0 1-12.62 5.64l1.77-1.78a4 4 0 0 0 4.9-4.9l2.76-2.75zm-.25-3.99l1.42 1.42L3.64 17.78l-1.42-1.42L16.36 2.22z" />
        </svg>
        <svg id="show-icon" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
          <path fill="white"
            d="M.2 10a11 11 0 0 1 19.6 0A11 11 0 0 1 .2 10zm9.8 4a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0-2a2 2 0 1 1 0-4 2 2 0 0 1 0 4z" />
        </svg>
      </button>
    </div>
    <div id="header-body" class="active">
      <h5>Code & info on <a href="https://github.com/gnikoloff/webgpu-raytracer" target="_blank">Github</a>. Made by <a
          target="_blank" href="https://georgi-nikolov.com/">Georgi Nikolov</a></h5>
      <p>Hold left mouse button to rotate and right to pan.</p>
      <div id="loader">
        <div id="progress"><span id="progress-percent"></span></div>
      </div>
      <p>Sample counter: <span class="monospace-value" id="frame-count"></span>&nbsp;&nbsp;|&nbsp;&nbsp;Time expired:
        <span class="monospace-value" id="time-expired"></span>
      </p>
    </div>
  </header>

  <script>
    if (!navigator.gpu) {
      document.getElementById("no-webgpu").style.display = "block"
      document.getElementById("no-webgpu-screenshot").innerHTML = `
          <img src="no-webgpu-screenshot.png" alt="Render containing a bunch of models with the WebGPU raytracer" />
        `
      throw new Error("WebGPU not supported!")
    }
  </script>
  <script type="module" src="src/index.ts"></script>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FHFK6EXTGM"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'G-FHFK6EXTGM');
  </script>

</body>

</html>